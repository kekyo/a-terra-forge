<!doctype html>
<!--
a-terra-forge - Universal document-oriented markdown site generator
Copyright (c) Kouji Matsui. (@kekyo@mi.kekyo.net)
Under MIT.
https://github.com/kekyo/a-terra-forge
-->
{{
set article (first articles)
if locale?
}}
<html lang="{{locale}}">
{{else}}
<html>
{{end}}
  <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="application-name" content="a-terra-forge_{{version}}">
    <meta property="og:type" content="article">
    <meta property="og:title" content="{{article.title}}">
    {{if article?.description?}}
    <meta name="description" content="{{article.description}}">
    <meta property="og:description" content="{{article.description}}">
    {{elif siteDescription?}}
    <meta name="description" content="{{siteDescription}}">
    <meta property="og:description" content="{{siteDescription}}">
    {{
    end
    if siteName?
    }}
    <meta property="og:site_name" content="{{siteName}}">
    {{
    end
    if locale?}}
    <meta property="og:locale" content="{{locale}}">
    {{if (not (eq locale 'en'))}}
    <meta property="og:locale:alternate" content="en">
    {{
    end
    end
    if article?.git?
      if article.git.author.name?
    }}
    <meta property="article:author" content="{{article.git.author.name}}">
    {{
      end
      if article.git.committer.date?
    }}
    <meta property="article:modified_time" content="{{formatDate article.git.committer.date}}">
    {{
      end
    end
    if article?.tags?
    }}
    <meta property="article:tag" content="{{join ',' article.tags}}">
    {{end}}
    <meta property="twitter:card" content="summary">
    {{
    set rssPath (getSiteTemplatePath 'feed.xml')
    if rssPath?
    }}
    <link rel="alternate" type="application/rss+xml" title="RSS" href="{{rssPath}}" />
    {{
    end
    set atomPath (getSiteTemplatePath 'atom.xml')
    if atomPath?
    }}
    <link rel="alternate" type="application/atom+xml" title="Atom" href="{{atomPath}}" />
    {{
    end
    if categoryCommitKeyWithDirty?
    }}
    <meta name="atr:content-revision" content="{{categoryCommitKeyWithDirty}}">
    {{
    end
    if siteName?
    }}
    <title>{{article.title}} - {{siteName}}</title>
    {{else}}
    <title>{{article.title}}</title>
    {{end}}
    <script>
      // Earlier theme application
      (() => {
        const storageKey = 'preferred-theme';
        const themeAttr = 'data-bs-theme';
        const getStoredTheme = () => {
          try {
            const saved = localStorage.getItem(storageKey);
            return saved === 'dark' || saved === 'light' ? saved : null;
          } catch {
            return null;
          }
        };
        const getMediaTheme = () => {
          if (typeof window.matchMedia !== 'function') {
            return 'light';
          }
          return window.matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark'
            : 'light';
        };
        const theme = getStoredTheme() ?? getMediaTheme();
        document.documentElement.setAttribute(themeAttr, theme);
      })();
    </script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
      rel="stylesheet"
      crossorigin="anonymous">
    {{
    set stylePath (getSiteTemplatePath 'site-style.css')
    if stylePath?
    }}
    <link rel="stylesheet" href="{{stylePath}}" />
    {{end}}
  </head>
  <body>
{{import 'navigation-bar.html'}}
    <div class="docs">
      <div class="article-entry">
        <div class="entry-header">
            <h1{{if headerIconCode?}} style="--header-icon: '{{headerIconCode}}';"{{end}}>{{article.title}}</h1>
          {{if (not hideMeta?)}}
          <div class="entry-meta">
            {{
            if article?.git?
              if article.git.committer.date?
            }}
            <p>{{getMessage 'date'}}: {{formatDate 'YYYY/MM/DD' article.git.committer.date}}</p>
            {{
              end
              if article.git.author.name?
            }}
            <p>{{getMessage 'author'}}: {{getMessage article.git.author.name}}</p>
            {{
              end
            end
            }}
          </div>
          {{end}}
        </div>
      </div>
      {{
      for article articles
        article.entryHtml
      end
      }}
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    {{if (eq mermaidRenderer 'mermaid')}}
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"
      crossorigin="anonymous"
    ></script>
    {{
    end
    set scriptPath (getSiteTemplatePath 'site-script.js')
    if scriptPath?
    }}
    <script src="{{scriptPath}}"></script>
    {{end}}
  </body>
</html>
